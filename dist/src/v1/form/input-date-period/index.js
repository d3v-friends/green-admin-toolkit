"use client";
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from "react";
import { fnCss } from "nextjs-tools";
import Image from "next/image";
import Calendar from "react-calendar";
import { ModalToggler } from "../..";
import { DateTime } from "luxon";
import ImgCross from "web-asset/svg/regular/fi-rr-cross.svg";
export default function ({ className, label, imgSrc, value = {}, onChange = () => { }, timezone = "Asia/Seoul", name, }) {
    var _a, _b, _c, _d;
    const [start, setStart] = useState(false);
    const [end, setEnd] = useState(false);
    const strStart = value.start ? DateTime.fromJSDate(value.start).setZone(timezone).toFormat("yyyy.MM.dd") : "미정";
    const strEnd = value.end ? DateTime.fromJSDate(value.end).setZone(timezone).toFormat("yyyy.MM.dd") : "미정";
    return (_jsxs("div", { className: className, children: [label && _jsx("p", { className: "mb-[-5px]", children: label }), _jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-2 lg:gap-4", children: [_jsxs("div", { className: fnCss.sum("relative flex items-center border-all rounded-md h-[2.5rem] overflow-hidden"), children: [imgSrc && (_jsx("div", { className: fnCss.sum("border-right h-full flex pl-2 pr-2 bg-(--primary)"), children: _jsx(Image, { className: fnCss.sum("no-drag filter-(--primary-alt-filter)"), src: imgSrc, alt: "icon", width: 25, height: 25 }) })), _jsxs("div", { className: "grow pl-2 pr-2", children: [_jsx("input", { className: "w-full", name: name === null || name === void 0 ? void 0 : name.start, value: (_b = (_a = value === null || value === void 0 ? void 0 : value.start) === null || _a === void 0 ? void 0 : _a.toISOString()) !== null && _b !== void 0 ? _b : "", hidden: true, onChange: () => { } }), _jsx("button", { className: "hover:underline", onClick: () => setStart(true), children: strStart })] }), value.start && (_jsx("button", { onClick: () => onChange(Object.assign(Object.assign({}, value), { start: undefined })), children: _jsx(Image, { src: ImgCross, alt: "clear", width: 20, height: 20, className: "absolute right-0 top-0 h-[2.5rem] no-drag mr-2 filter-(--text-2-filter) hover:filter-(--primary-filter)" }) }))] }), _jsxs("div", { className: fnCss.sum("flex items-center border-all rounded-md h-[2.5rem] overflow-hidden pl-2"), children: [_jsx("input", { name: name === null || name === void 0 ? void 0 : name.end, value: (_d = (_c = value === null || value === void 0 ? void 0 : value.end) === null || _c === void 0 ? void 0 : _c.toISOString()) !== null && _d !== void 0 ? _d : "", hidden: true, onChange: () => { } }), _jsx("button", { className: "hover:underline", onClick: () => setEnd(true), children: strEnd }), _jsx("div", { className: "grow" }), value.end && (_jsx("button", { onClick: () => onChange(Object.assign(Object.assign({}, value), { end: undefined })), children: _jsx(Image, { src: ImgCross, alt: "clear", width: 20, height: 20, className: "no-drag mr-2 w-[0.7rem] filter-(--text-2-filter) hover:filter-(--primary-filter)" }) }))] })] }), _jsx("div", { className: "min-h-[1.5rem]" }), _jsx(Modal, { value: value === null || value === void 0 ? void 0 : value.start, open: start, onChangeOpen: setStart, onChange: (start) => onChange(Object.assign(Object.assign({}, value), { start })) }), _jsx(Modal, { value: value === null || value === void 0 ? void 0 : value.end, open: end, onChangeOpen: setEnd, onChange: (end) => onChange(Object.assign(Object.assign({}, value), { end })) })] }));
}
function Modal({ value, onChange, open, onChangeOpen, }) {
    return (_jsx(ModalToggler, { open: open, onChange: onChangeOpen, children: _jsx(Calendar, { locale: "ko-kr", value: value, onChange: (date, event) => {
                if (!(date instanceof Date))
                    return;
                onChange(new Date(date.setHours(0, 0, 0, 0)));
                onChangeOpen(false);
            } }) }));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvdjEvZm9ybS9pbnB1dC1kYXRlLXBlcmlvZC9pbmRleC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOztBQUNiLE9BQWMsRUFBWSxRQUFRLEVBQUMsTUFBTSxPQUFPLENBQUM7QUFDakQsT0FBTyxFQUFTLEtBQUssRUFBUyxNQUFNLGNBQWMsQ0FBQztBQUNuRCxPQUFPLEtBQUssTUFBTSxZQUFZLENBQUM7QUFDL0IsT0FBTyxRQUFRLE1BQU0sZ0JBQWdCLENBQUM7QUFDdEMsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLE9BQU8sQ0FBQztBQUNuQyxPQUFPLEVBQUMsUUFBUSxFQUFDLE1BQU0sT0FBTyxDQUFDO0FBQy9CLE9BQU8sUUFBUSxNQUFNLHVDQUF1QyxDQUFDO0FBb0I3RCxNQUFNLENBQUMsT0FBTyxXQUFXLEVBQ3hCLFNBQVMsRUFDVCxLQUFLLEVBQ0wsTUFBTSxFQUNOLEtBQUssR0FBRyxFQUFFLEVBQ1YsUUFBUSxHQUFHLEdBQUcsRUFBRSxHQUFFLENBQUMsRUFDbkIsUUFBUSxHQUFHLFlBQVksRUFDdkIsSUFBSSxHQUNhOztJQUNqQixNQUFNLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMxQyxNQUFNLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN0QyxNQUFNLFFBQVEsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDaEgsTUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLEdBQUcs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