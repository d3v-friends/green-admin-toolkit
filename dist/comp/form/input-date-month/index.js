"use client";
import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { useState } from "react";
import { fnCss } from "nextjs-tools";
import { ModalElement, ModalToggler } from "../../../index.js";
import Image from "next/image";
import { DateTime } from "luxon";
import ImgPrev from "web-asset/svg/regular/fi-rr-angle-left.svg";
import ImgNext from "web-asset/svg/regular/fi-rr-angle-right.svg";
const { Body, Content } = ModalElement;
export default function ({ className, label, imgSrc, value, onChange = () => { }, timezone = "Asia/Seoul", name, }) {
    var _a;
    const [open, setOpen] = useState(false);
    const dateStr = value ? DateTime.fromISO(value.toISOString()).setZone(timezone).toFormat("yyyy.MM") : "미정";
    const onClickPrev = () => {
        onChange(new Date(value.setFullYear(value.getFullYear() - 1, 0, 1)));
    };
    const onClickNext = () => {
        onChange(new Date(value.setFullYear(value.getFullYear() + 1, 0, 1)));
    };
    const onClickMonth = (month) => {
        onChange(new Date(new Date(value.setFullYear(value.getFullYear(), month - 1, 1)).setUTCHours(0, 0, 0, 0)));
        setOpen(false);
    };
    return (_jsxs(_Fragment, { children: [_jsxs("div", { className: className, children: [label && _jsx("p", { className: "mb-[-5px]", children: label }), _jsxs("div", { className: fnCss.sum("relative flex items-center border-all rounded-md h-[2.5rem] overflow-hidden"), children: [imgSrc && (_jsx("div", { className: fnCss.sum("border-right h-full flex pl-2 pr-2 bg-(--primary)"), children: _jsx(Image, { className: fnCss.sum("no-drag filter-(--primary-alt-filter)"), src: imgSrc, alt: "icon", width: 25, height: 25 }) })), _jsxs("div", { className: "grow pl-2 pr-2", children: [_jsx("input", { hidden: true, name: name, value: (_a = value === null || value === void 0 ? void 0 : value.toISOString()) !== null && _a !== void 0 ? _a : "", onChange: () => { } }), _jsx("button", { className: "hover:underline", onClick: () => setOpen(true), children: dateStr })] })] }), _jsx("div", { className: "min-h-[1.5rem]" })] }), _jsx(ModalToggler, { open: open, onChange: setOpen, children: _jsx(Body, { children: _jsxs(Content, { children: [_jsxs("div", { className: "flex items-center mb-4", children: [_jsx(YearButton, { imgSrc: ImgPrev, onClick: onClickPrev }), _jsxs("h5", { className: "grow text-center p-0", children: [value.getFullYear(), " \uB144"] }), _jsx(YearButton, { imgSrc: ImgNext, onClick: onClickNext })] }), _jsx("div", { className: "grid grid-cols-4 gap-2 lg:gap-4", children: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12].map((month, i) => (_jsxs("button", { onClick: () => onClickMonth(month), className: fnCss.sum("no-drag p-2 border-all rounded-md text-center", "hover:border-(--primary) hover:text-(--primary)"), children: [month, " \uC6D4"] }, i))) })] }) }) })] }));
}
function YearButton({ imgSrc, onClick, }) {
    return (_jsx("button", { className: "filter-(--text-2-filter) hover:filter-(--primary-filter) outline-none", onClick: onClick, children: _jsx(Image, { className: "no-drag", src: imgSrc, alt: "prev", width: "20", height: "20" }) }));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcC9mb3JtL2lucHV0LWRhdGUtbW9udGgvaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7QUFDYixPQUFjLEVBQStCLFFBQVEsRUFBQyxNQUFNLE9BQU8sQ0FBQztBQUNwRSxPQUFPLEVBQVMsS0FBSyxFQUFTLE1BQU0sY0FBYyxDQUFDO0FBQ25ELE9BQU8sRUFBQyxZQUFZLEVBQUUsWUFBWSxFQUFDLE1BQU0sWUFBWSxDQUFDO0FBQ3RELE9BQU8sS0FBd0IsTUFBTSxZQUFZLENBQUM7QUFDbEQsT0FBTyxFQUFDLFFBQVEsRUFBQyxNQUFNLE9BQU8sQ0FBQztBQUMvQixPQUFPLE9BQU8sTUFBTSw0Q0FBNEMsQ0FBQztBQUNqRSxPQUFPLE9BQU8sTUFBTSw2Q0FBNkMsQ0FBQztBQVlsRSxNQUFNLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBQyxHQUFHLFlBQVksQ0FBQztBQUVyQyxNQUFNLENBQUMsT0FBTyxXQUFXLEVBQ3hCLFNBQVMsRUFDVCxLQUFLLEVBQ0wsTUFBTSxFQUNOLEtBQUssRUFDTCxRQUFRLEdBQUcsR0FBRyxFQUFFLEdBQUUsQ0FBQyxFQUNuQixRQUFRLEdBQUcsWUFBWSxFQUN2QixJQUFJLEdBQ2E7O0lBQ2pCLE1BQU0sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3hDLE1BQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFFM0csTUFBTSxXQUFXLEdBQUcsR0FBRyxFQUFFO1FBQ3hCLFFBQVEsQ0FBQyxJQUFJLElBQUks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