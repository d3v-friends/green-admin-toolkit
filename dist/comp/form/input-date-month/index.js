"use client";
import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { useState } from "react";
import { fnCss } from "nextjs-tools";
import { ModalElement, ModalToggler } from "../../../index.js";
import Image from "next/image";
import { DateTime } from "luxon";
import "../../../../asset/style/react-calendar.scss";
import ImgPrev from "web-asset/svg/regular/fi-rr-angle-left.svg";
import ImgNext from "web-asset/svg/regular/fi-rr-angle-right.svg";
const { Body, Content } = ModalElement;
export default function ({ className, label, imgSrc, value, onChange = () => { }, timezone = "Asia/Seoul", name, }) {
    var _a;
    const [open, setOpen] = useState(false);
    const dateStr = value ? DateTime.fromISO(value.toISOString()).setZone(timezone).toFormat("yyyy.MM") : "미정";
    const onClickPrev = () => {
        onChange(new Date(value.setFullYear(value.getFullYear() - 1, 0, 1)));
    };
    const onClickNext = () => {
        onChange(new Date(value.setFullYear(value.getFullYear() + 1, 0, 1)));
    };
    const onClickMonth = (month) => {
        onChange(new Date(new Date(value.setFullYear(value.getFullYear(), month - 1, 1)).setUTCHours(0, 0, 0, 0)));
        setOpen(false);
    };
    return (_jsxs(_Fragment, { children: [_jsxs("div", { className: className, children: [label && _jsx("p", { className: "mb-[-5px]", children: label }), _jsxs("div", { className: fnCss.sum("flex items-center border-all rounded-md h-[2.5rem] overflow-hidden"), children: [imgSrc && (_jsx("div", { className: fnCss.sum("border-right h-full flex pl-2 pr-2 bg-(--primary)"), children: _jsx(Image, { className: fnCss.sum("no-drag filter-(--primary-alt-filter)"), src: imgSrc, alt: "icon", width: 25, height: 25 }) })), _jsxs("div", { className: "grow pl-2 pr-2", children: [_jsx("input", { hidden: true, name: name, value: (_a = value === null || value === void 0 ? void 0 : value.toISOString()) !== null && _a !== void 0 ? _a : "", onChange: () => { } }), _jsx("button", { className: "hover:underline", onClick: () => setOpen(true), children: dateStr })] })] }), _jsx("div", { className: "min-h-[1.5rem]" })] }), _jsx(ModalToggler, { open: open, onChange: setOpen, children: _jsx(Body, { children: _jsxs(Content, { children: [_jsxs("div", { className: "flex items-center mb-4", children: [_jsx(YearButton, { imgSrc: ImgPrev, onClick: onClickPrev }), _jsxs("h5", { className: "grow text-center p-0", children: [value.getFullYear(), " \uB144"] }), _jsx(YearButton, { imgSrc: ImgNext, onClick: onClickNext })] }), _jsx("div", { className: "grid grid-cols-4 gap-2 lg:gap-4", children: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12].map((month, i) => (_jsxs("button", { onClick: () => onClickMonth(month), className: fnCss.sum("no-drag p-2 border-all rounded-md text-center", "hover:border-(--primary) hover:text-(--primary)"), children: [month, " \uC6D4"] }, i))) })] }) }) })] }));
}
function YearButton({ imgSrc, onClick, }) {
    return (_jsx("button", { className: "filter-(--text-2-filter) hover:filter-(--primary-filter) outline-none", onClick: onClick, children: _jsx(Image, { className: "no-drag", src: imgSrc, alt: "prev", width: "20", height: "20" }) }));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcC9mb3JtL2lucHV0LWRhdGUtbW9udGgvaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7QUFDYixPQUFjLEVBQStCLFFBQVEsRUFBQyxNQUFNLE9BQU8sQ0FBQztBQUNwRSxPQUFPLEVBQVMsS0FBSyxFQUFTLE1BQU0sY0FBYyxDQUFDO0FBQ25ELE9BQU8sRUFBQyxZQUFZLEVBQUUsWUFBWSxFQUFDLE1BQU0sWUFBWSxDQUFDO0FBQ3RELE9BQU8sS0FBd0IsTUFBTSxZQUFZLENBQUM7QUFDbEQsT0FBTyxFQUFDLFFBQVEsRUFBQyxNQUFNLE9BQU8sQ0FBQztBQUMvQixPQUFPLGtDQUFrQyxDQUFDO0FBQzFDLE9BQU8sT0FBTyxNQUFNLDRDQUE0QyxDQUFDO0FBQ2pFLE9BQU8sT0FBTyxNQUFNLDZDQUE2QyxDQUFDO0FBWWxFLE1BQU0sRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFDLEdBQUcsWUFBWSxDQUFDO0FBRXJDLE1BQU0sQ0FBQyxPQUFPLFdBQVcsRUFDeEIsU0FBUyxFQUNULEtBQUssRUFDTCxNQUFNLEVBQ04sS0FBSyxFQUNMLFFBQVEsR0FBRyxHQUFHLEVBQUUsR0FBRSxDQUFDLEVBQ25CLFFBQVEsR0FBRyxZQUFZLEVBQ3ZCLElBQUksR0FDYTs7SUFDakIsTUFBTSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDeEMsTUFBTSxPQUFPLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztJQUUzRyxNQUFNLFdBQVcsR0FBRyxHQUFHLEVBQUU7UUFDeEIsUUFBUSxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3RFLENBQUMsQ0FBQztJQUNGLE1BQU0sV0FBVyxHQUFHLEdBQUcsRUFBRTtRQUN4QixRQUFRLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdEUsQ0FBQyxDQUFDO0lBQ0YsTUFBTSxZQUFZLEdBQUcsQ0FBQyxLQUFhLEVBQUUsRUFBRTtRQUN0QyxRQUFRLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLEVBQUUsS0FBSyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0csT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2hCLENBQUMsQ0FBQztJQUVGLE9BQU8sQ0FDTiw4QkFDQyxlQUFLLFNBQVMsRUFBRSxTQUFTLGFBQ3ZCLEtBQUssSUFBSSxZQUFHLFNBQVMsRUFBQyxXQUFXLFlBQUUsS0FBSyxHQUFLLEVBQzlDLGVBQUssU0FBUyxFQUFFLEtBQUssQ0FBQyxHQUFHLENBQUMsb0VBQW9FLENBQUMsYUFDN0YsTUFBTSxJQUFJLENBQ1YsY0FBSyxTQUFTLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxtREFBbUQsQ0FBQyxZQUM3RSxLQUFDLEtBQUssSUFDTCxTQUFTLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyx1Q0FBdUMsQ0FBQyxFQUM3RCxHQUFHLEVBQUUsTUFBTSxFQUNYLEdBQUcsRUFBQyxNQUFNLEVBQ1YsS0FBSyxFQUFFLEVBQUUsRUFDVCxNQUFNLEVBQUUsRUFBRSxHQUNULEdBQ0csQ0FDTixFQUNELGVBQUssU0FBUyxFQUFDLGdCQUFnQixhQUM5QixnQkFDQyxNQUFNLFFBQ04sSUFBSSxFQUFFLElBQUksRUFDVixLQUFLLEVBQUUsTUFBQSxLQUFLLGFBQUwsS0FBSyx1QkFBTCxLQUFLLENBQUUsV0FBVyxFQUFFLG1DQUFJLEVBQUUsRUFDakMsUUFBUSxFQUFFLEdBQUcsRUFBRSxHQUFFLENBQUMsR0FDakIsRUFDRixpQkFDQyxTQUFTLEVBQUMsaUJBQWlCLEVBQzNCLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFlBQzNCLE9BQU8sR0FDQSxJQUNKLElBQ0QsRUFDTixjQUFLLFNBQVMsRUFBQyxnQkFBZ0IsR0FBRyxJQUM3QixFQUVOLEtBQUMsWUFBWSxJQUNaLElBQUksRUFBRSxJQUFJLEVBQ1YsUUFBUSxFQUFFLE9BQU8sWUFDakIsS0FBQyxJQUFJLGNBQ0osTUFBQyxPQUFPLGVBQ1AsZUFBSyxTQUFTLEVBQUMsd0JBQXdCLGFBQ3RDLEtBQUMsVUFBVSxJQUNWLE1BQU0sRUFBRSxPQUFPLEVBQ2YsT0FBTyxFQUFFLFdBQVcsR0FDbkIsRUFDRixjQUFJLFNBQVMsRUFBQyxzQkFBc0IsYUFBRSxLQUFLLENBQUMsV0FBVyxFQUFFLGVBQVEsRUFDakUsS0FBQyxVQUFVLElBQ1YsTUFBTSxFQUFFLE9BQU8sRUFDZixPQUFPLEVBQUUsV0FBVyxHQUNuQixJQUNHLEVBRU4sY0FBSyxTQUFTLEVBQUMsaUNBQWlDLFlBQzlDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUMxRCxrQkFDQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxFQUNsQyxTQUFTLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FDbkIsK0NBQStDLEVBQy9DLGlEQUFpRCxDQUNqRCxhQUVBLEtBQUssZ0JBREQsQ0FBQyxDQUVFLENBQ1QsQ0FBQyxHQUNHLElBQ0csR0FDSixHQUNPLElBQ2IsQ0FDSCxDQUFDO0FBQ0gsQ0FBQztBQUVELFNBQVMsVUFBVSxDQUFDLEVBQ25CLE1BQU0sRUFDTixPQUFPLEdBSU47SUFDRCxPQUFPLENBQ04saUJBQ0MsU0FBUyxFQUFDLHVFQUF1RSxFQUNqRixPQUFPLEVBQUUsT0FBTyxZQUNoQixLQUFDLEtBQUssSUFDTCxTQUFTLEVBQUMsU0FBUyxFQUNuQixHQUFHLEVBQUUsTUFBTSxFQUNYLEdBQUcsRUFBQyxNQUFNLEVBQ1YsS0FBSyxFQUFDLElBQUksRUFDVixNQUFNLEVBQUMsSUFBSSxHQUNWLEdBQ00sQ0FDVCxDQUFDO0FBQ0gsQ0FBQyJ9